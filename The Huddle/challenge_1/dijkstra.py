from heapq import heapify, heappop, heappush

class Graph:
    def __init__(self, graph: dict={}):
        self.graph = graph

    def distancias_cortas(self, source):
        distancias = {node: float("inf") for node in self.graph}
        distancias[source] = 0 # se inicializa la fuente en cero
        
        nodos_visitados = set()

        pq = [(0, source)]
        heapify(pq)

        while pq:
            distancia_actual, nodo_actual = heappop(pq)

            if nodo_actual in nodos_visitados:
                continue

            nodos_visitados.add(nodo_actual)

            for nodo_vecino, distancia_nodo_vecino in self.graph[nodo_actual].items():
                distancia_aux = distancia_actual + distancia_nodo_vecino
                if distancia_aux < distancias[nodo_vecino]:
                    distancias[nodo_vecino] = distancia_aux
                    heappush(pq, (distancia_aux, nodo_vecino))

        predecesores = {node: None for node in self.graph}
        for node, distancia in distancias.items():
            for vecino, distancia_vecino in self.graph[node].items():
                if distancias[vecino] == distancia + distancia_vecino:
                    predecesores[vecino] = node

        return distancias, predecesores
    
    def ruta_corta(self, source, target):
        _, predecesores = self.distancias_cortas(source)

        ruta = []
        nodo_actual = target

        while nodo_actual:
            ruta.append(nodo_actual)
            nodo_actual = predecesores[nodo_actual]

        ruta.reverse()
        return ruta
    

if __name__=="__main__":
    list_adj = {(0, 0): {(1, 0): 1, (0, 1): 1}, (0, 1): {(0, 0): 1, (0, 2): 1}, (0, 2): {(0, 1): 1, (0, 3): 1}, (0, 3): {(0, 2): 1, (0, 4): 1}, (0, 4): {(0, 3): 1, (0, 5): 1}, (0, 5): {(1, 5): 1, (0, 4): 1, (0, 6): 1}, (0, 6): {(0, 5): 1, (0, 7): 1}, (0, 7): {(0, 6): 1, (0, 8): 1}, (0, 8): {(0, 7): 1, (0, 9): 1}, (0, 9): {(0, 8): 1, (0, 10): 1}, (0, 10): {(1, 10): 1, (0, 9): 1, (0, 11): 1}, (0, 11): {(0, 10): 1, (0, 12): 1}, (0, 12): {(0, 11): 1, (0, 13): 1}, (0, 13): {(0, 12): 1, (0, 14): 1}, (0, 14): {(0, 13): 1, (0, 15): 1}, (0, 15): {(1, 15): 1, (0, 14): 1, (0, 16): 1}, (0, 16): {(0, 15): 1, (0, 17): 1}, (0, 17): {(0, 16): 1, (0, 18): 1}, (0, 18): {(0, 17): 1, (0, 19): 1}, (0, 19): {(0, 18): 1, (0, 20): 1}, (0, 20): {(1, 20): 1, (0, 19): 1, (0, 21): 1}, (0, 21): {(0, 20): 1, (0, 22): 1}, (0, 22): {(0, 21): 1, (0, 23): 1}, (0, 23): {(0, 22): 1, (0, 24): 1}, (0, 24): {(0, 23): 1, (0, 25): 1}, (0, 25): {(1, 25): 1, (0, 24): 1}, (1, 0): {(0, 0): 1, (2, 0): 1}, (1, 5): {(0, 5): 1}, (1, 10): {(0, 10): 1, (2, 10): 1}, (1, 15): {(0, 15): 1, (2, 15): 1}, (1, 20): {(0, 20): 1, (2, 20): 1}, (1, 25): {(0, 25): 1, (2, 25): 1}, (2, 0): {(1, 0): 1, (3, 0): 1}, (2, 10): {(1, 10): 1, (3, 10): 1}, (2, 15): {(1, 15): 1, (3, 15): 1}, (2, 20): {(1, 20): 1, (3, 20): 1}, (2, 25): {(1, 25): 1, (3, 25): 1}, (3, 0): {(2, 0): 1, (4, 0): 1}, (3, 5): {(4, 5): 1}, (3, 10): {(2, 10): 1, (4, 10): 1}, (3, 15): {(2, 15): 1, (4, 15): 1}, (3, 20): {(2, 20): 1, (4, 20): 1}, (3, 25): {(2, 25): 1, (4, 25): 1}, (4, 0): {(3, 0): 1, (5, 0): 1, (4, 1): 1}, (4, 1): {(4, 0): 1, (4, 2): 1}, (4, 2): {(4, 1): 1, (4, 3): 1}, (4, 3): {(4, 2): 1, (4, 4): 1}, (4, 4): {(4, 3): 1, (4, 5): 1}, (4, 5): {(3, 5): 1, (5, 5): 1, (4, 4): 1, (4, 6): 1}, (4, 6): {(4, 5): 1, (4, 7): 1}, (4, 7): {(4, 6): 1, (4, 8): 1}, (4, 8): {(4, 7): 1, (4, 9): 1}, (4, 9): {(4, 8): 1, (4, 10): 1}, (4, 10): {(3, 10): 1, (5, 10): 1, (4, 9): 1}, (4, 12): {(4, 13): 1}, (4, 13): {(4, 12): 1}, (4, 15): {(3, 15): 1, (5, 15): 1, (4, 16): 1}, (4, 16): {(4, 15): 1, (4, 17): 1}, (4, 17): {(4, 16): 1, (4, 18): 1}, (4, 18): {(4, 17): 1, (4, 19): 1}, (4, 19): {(4, 18): 1, (4, 20): 1}, (4, 20): {(3, 20): 1, (5, 20): 1, (4, 19): 1, (4, 21): 1}, (4, 21): {(4, 20): 1, (4, 22): 1}, (4, 22): {(4, 21): 1, (4, 23): 1}, (4, 23): {(4, 22): 1, (4, 24): 1}, (4, 24): {(4, 23): 1, (4, 25): 1}, (4, 25): {(3, 25): 1, (5, 25): 1, (4, 24): 1}, (5, 0): {(4, 0): 1, (6, 0): 1}, (5, 5): {(4, 5): 1, (6, 5): 1}, (5, 10): {(4, 10): 1, (6, 10): 1}, (5, 15): {(4, 15): 1, (6, 15): 1}, (5, 20): {(4, 20): 1}, (5, 25): {(4, 25): 1, (6, 25): 1}, (6, 0): {(5, 0): 1, (7, 0): 1}, (6, 5): {(5, 5): 1, (7, 5): 1}, (6, 10): {(5, 10): 1, (7, 10): 1}, (6, 15): {(5, 15): 1, (7, 15): 1}, (6, 25): {(5, 25): 1, (7, 25): 1}, (7, 0): {(6, 0): 1, (8, 0): 1}, (7, 5): {(6, 5): 1, (8, 5): 1}, (7, 10): {(6, 10): 1, (8, 10): 1}, (7, 15): {(6, 15): 1, (8, 15): 1}, (7, 20): {(8, 20): 1}, (7, 25): {(6, 25): 1, (8, 25): 1}, (8, 0): {(7, 0): 1, (9, 0): 1, (8, 1): 1}, (8, 1): {(8, 0): 1, (8, 2): 1}, (8, 2): {(8, 1): 1, (8, 3): 1}, (8, 3): {(8, 2): 1, (8, 4): 1}, (8, 4): {(8, 3): 1, (8, 5): 1}, (8, 5): {(7, 5): 1, (9, 5): 1, (8, 4): 1, (8, 6): 1}, (8, 6): {(8, 5): 1, (8, 7): 1}, (8, 7): {(8, 6): 1, (8, 8): 1}, (8, 8): {(8, 7): 1, (8, 9): 1}, (8, 9): {(8, 8): 1, (8, 10): 1}, (8, 10): {(7, 10): 1, (9, 10): 1, (8, 9): 1, (8, 11): 1}, (8, 11): {(8, 10): 1, (8, 12): 1}, (8, 12): {(8, 11): 1, (8, 13): 1}, (8, 13): {(8, 12): 1, (8, 14): 1}, (8, 14): {(8, 13): 1, (8, 15): 1}, (8, 15): {(7, 15): 1, (9, 15): 1, (8, 14): 1, (8, 16): 1}, (8, 16): {(8, 15): 1, (8, 17): 1}, (8, 17): {(8, 16): 1, (8, 18): 1}, (8, 18): {(8, 17): 1, (8, 19): 1}, (8, 19): {(8, 18): 1, (8, 20): 1}, (8, 20): {(7, 20): 1, (9, 20): 1, (8, 19): 1, (8, 21): 1}, (8, 21): {(8, 20): 1, (8, 22): 1}, (8, 22): {(8, 21): 1}, (8, 24): {(8, 25): 1}, (8, 25): {(7, 25): 1, (9, 25): 1, (8, 24): 1}, (9, 0): {(8, 0): 1, (10, 0): 1}, (9, 5): {(8, 5): 1, (10, 5): 1}, (9, 10): {(8, 10): 1, (10, 10): 1}, (9, 15): {(8, 15): 1, (10, 15): 1}, (9, 20): {(8, 20): 1, (10, 20): 1}, (9, 25): {(8, 25): 1, (10, 25): 1}, (10, 0): {(9, 0): 1}, (10, 5): {(9, 5): 1}, (10, 10): {(9, 10): 1, (11, 10): 1}, (10, 15): {(9, 15): 1, (11, 15): 1}, (10, 20): {(9, 20): 1, (11, 20): 1}, (10, 25): {(9, 25): 1, (11, 25): 1}, (11, 10): {(10, 10): 1, (12, 10): 1}, (11, 15): {(10, 15): 1, (12, 15): 1}, (11, 20): {(10, 20): 1, (12, 20): 1}, (11, 25): {(10, 25): 1, (12, 25): 1}, (12, 0): {(13, 0): 1, (12, 1): 1}, (12, 1): {(12, 0): 1, (12, 2): 1}, (12, 2): {(12, 1): 1, (12, 3): 1}, (12, 3): {(12, 2): 1, (12, 4): 1}, (12, 4): {(12, 3): 1, (12, 5): 1}, (12, 5): {(13, 5): 1, (12, 4): 1, (12, 6): 1}, (12, 6): {(12, 5): 1}, (12, 8): {(12, 9): 1}, (12, 9): {(12, 8): 1, (12, 10): 1}, (12, 10): {(11, 10): 1, (13, 10): 1, (12, 9): 1, (12, 11): 1}, (12, 11): {(12, 10): 1, (12, 12): 1}, (12, 12): {(12, 11): 1, (12, 13): 1}, (12, 13): {(12, 12): 1, (12, 14): 1}, (12, 14): {(12, 13): 1, (12, 15): 1}, (12, 15): {(11, 15): 1, (13, 15): 1, (12, 14): 1, (12, 16): 1}, (12, 16): {(12, 15): 1, (12, 17): 1}, (12, 17): {(12, 16): 1, (12, 18): 1}, (12, 18): {(12, 17): 1, (12, 19): 1}, (12, 19): {(12, 18): 1, (12, 20): 1}, (12, 20): {(11, 20): 1, (13, 20): 1, (12, 19): 1, (12, 21): 1}, (12, 21): {(12, 20): 1, (12, 22): 1}, (12, 22): {(12, 21): 1, (12, 23): 1}, (12, 23): {(12, 22): 1, (12, 24): 1}, (12, 24): {(12, 23): 1, (12, 25): 1}, (12, 25): {(11, 25): 1, (13, 25): 1, (12, 24): 1}, (13, 0): {(12, 0): 1, (14, 0): 1}, (13, 5): {(12, 5): 1, (14, 5): 1}, (13, 10): {(12, 10): 1, (14, 10): 1}, (13, 15): {(12, 15): 1, (14, 15): 1}, (13, 20): {(12, 20): 1}, (13, 25): {(12, 25): 1, (14, 25): 1}, (14, 0): {(13, 0): 1, (15, 0): 1}, (14, 5): {(13, 5): 1, (15, 5): 1}, (14, 10): {(13, 10): 1, (15, 10): 1}, (14, 15): {(13, 15): 1, (15, 15): 1}, (14, 25): {(13, 25): 1, (15, 25): 1}, (15, 0): {(14, 0): 1, (16, 0): 1}, (15, 5): {(14, 5): 1, (16, 5): 1}, (15, 10): {(14, 10): 1, (16, 10): 1}, (15, 15): {(14, 15): 1, (16, 15): 1}, (15, 20): {(16, 20): 1}, (15, 25): {(14, 25): 1, (16, 25): 1}, (16, 0): {(15, 0): 1, (17, 0): 1, (16, 1): 1}, (16, 1): {(16, 0): 1, (16, 2): 1}, (16, 2): {(16, 1): 1, (16, 3): 1}, (16, 3): {(16, 2): 1, (16, 4): 1}, (16, 4): {(16, 3): 1, (16, 5): 1}, (16, 5): {(15, 5): 1, (17, 5): 1, (16, 4): 1, (16, 6): 1}, (16, 6): {(16, 5): 1, (16, 7): 1}, (16, 7): {(16, 6): 1, (16, 8): 1}, (16, 8): {(16, 7): 1, (16, 9): 1}, (16, 9): {(16, 8): 1, (16, 10): 1}, (16, 10): {(15, 10): 1, (17, 10): 1, (16, 9): 1, (16, 11): 1}, (16, 11): {(16, 10): 1, (16, 12): 1}, (16, 12): {(16, 11): 1, (16, 13): 1}, (16, 13): {(16, 12): 1, (16, 14): 1}, (16, 14): {(16, 13): 1, (16, 15): 1}, (16, 15): {(15, 15): 1, (17, 15): 1, (16, 14): 1, (16, 16): 1}, (16, 16): {(16, 15): 1, (16, 17): 1}, (16, 17): {(16, 16): 1, (16, 18): 1}, (16, 18): {(16, 17): 1, (16, 19): 1}, (16, 19): {(16, 18): 1, (16, 20): 1}, (16, 20): {(15, 20): 1, (17, 20): 1, (16, 19): 1, (16, 21): 1}, (16, 21): {(16, 20): 1, (16, 22): 1}, (16, 22): {(16, 21): 1, (16, 23): 1}, (16, 23): {(16, 22): 1, (16, 24): 1}, (16, 24): {(16, 23): 1, (16, 25): 1}, (16, 25): {(15, 25): 1, (17, 25): 1, (16, 24): 1}, (17, 0): {(16, 0): 1, (18, 0): 1}, (17, 5): {(16, 5): 1, (18, 5): 1}, (17, 10): {(16, 10): 1, (18, 10): 1}, (17, 15): {(16, 15): 1, (18, 15): 1}, (17, 20): {(16, 20): 1, (18, 20): 1}, (17, 25): {(16, 25): 1, (18, 25): 1}, (18, 0): {(17, 0): 1, (19, 0): 1}, (18, 5): {(17, 5): 1, (19, 5): 1}, (18, 10): {(17, 10): 1, (19, 10): 1}, (18, 15): {(17, 15): 1, (19, 15): 1}, (18, 20): {(17, 20): 1, (19, 20): 1}, (18, 25): {(17, 25): 1, (19, 25): 1}, (19, 0): {(18, 0): 1, (20, 0): 1}, (19, 5): {(18, 5): 1, (20, 5): 1}, (19, 10): {(18, 10): 1, (20, 10): 1}, (19, 15): {(18, 15): 1, (20, 15): 1}, (19, 20): {(18, 20): 1, (20, 20): 1}, (19, 25): {(18, 25): 1, (20, 25): 1}, (20, 0): {(19, 0): 1, (20, 1): 1}, (20, 1): {(20, 0): 1, (20, 2): 1}, (20, 2): {(20, 1): 1, (20, 3): 1}, (20, 3): {(20, 2): 1, (20, 4): 1}, (20, 4): {(20, 3): 1, (20, 5): 1}, (20, 5): {(19, 5): 1, (20, 4): 1, (20, 6): 1}, (20, 6): {(20, 5): 1, (20, 7): 1}, (20, 7): {(20, 6): 1, (20, 8): 1}, (20, 8): {(20, 7): 1, (20, 9): 1}, (20, 9): {(20, 8): 1, (20, 10): 1}, (20, 10): {(19, 10): 1, (20, 9): 1, (20, 11): 1}, (20, 11): {(20, 10): 1, (20, 12): 1}, (20, 12): {(20, 11): 1, (20, 13): 1}, (20, 13): {(20, 12): 1, (20, 14): 1}, (20, 14): {(20, 13): 1, (20, 15): 1}, (20, 15): {(19, 15): 1, (20, 14): 1, (20, 16): 1}, (20, 16): {(20, 15): 1, (20, 17): 1}, (20, 17): {(20, 16): 1, (20, 18): 1}, (20, 18): {(20, 17): 1, (20, 19): 1}, (20, 19): {(20, 18): 1, (20, 20): 1}, (20, 20): {(19, 20): 1, (20, 19): 1, (20, 21): 1}, (20, 21): {(20, 20): 1, (20, 22): 1}, (20, 22): {(20, 21): 1, (20, 23): 1}, (20, 23): {(20, 22): 1, (20, 24): 1}, (20, 24): {(20, 23): 1, (20, 25): 1}, (20, 25): {(19, 25): 1, (20, 24): 1}}

    graph = Graph(list_adj)
    inicio = (0, 0)
    final = (20, 21)
    camino = graph.ruta_corta(inicio, final)

    print(f"El camino mas corta desde {inicio} hasta {final} es {camino}")